# Build Stage
FROM mcr.microsoft.com/dotnet/sdk:2.1 AS buidenv
WORKDIR /app
COPY [".","/app"]
RUN dotnet restore
# Copy everything else and build
RUN dotnet publish -c Release -o out
RUN pwd

# Serve Stage
FROM mcr.microsoft.com/dotnet/aspnet:2.1 as serv
WORKDIR /app
COPY --from=buidenv /app/out ./
ENTRYPOINT [ "dotnet", "DotNetCoreSampleApi.dll" ]
